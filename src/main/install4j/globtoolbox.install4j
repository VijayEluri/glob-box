<?xml version="1.0" encoding="UTF-8"?>
<install4j version="4.2.3" transformSequenceNumber="2">
    <directoryPresets config="../../../target/gt-reader-pack-bin.dir"/>
    <application name="BEAM GlobToolbox Reader Pack" distributionSourceDir="" applicationId="9847-8837-7763-8480"
                 mediaDir="../../../target/installers"
                 mediaFilePattern="${compiler:sys.shortName}_${compiler:sys.version}_${compiler:sys.platform}_installer"
                 compression="6" lzmaCompression="false" pack200Compression="false" excludeSignedFromPacking="true"
                 keepModificationTimes="false" missingFilesStrategy="warn" shortName="beam-globtoolbox"
                 publisher="Brockmann Consult" publisherWeb="http://www.brockmann-consult.de/" version="2.0"
                 allPathsRelative="true" backupOnSave="true" autoSave="true" convertDotsToUnderscores="false"
                 macSignature="????" installerName="" javaMinVersion="1.6" javaMaxVersion="" allowBetaVM="false"
                 jdkMode="runtimeJre" jdkName="">
        <languages skipLanguageSelection="false" languageSelectionInPrincipalLanguage="false">
            <principalLanguage id="en" customLocalizationFile=""/>
            <additionalLanguages/>
        </languages>
        <searchSequence>
            <registry/>
            <envVar name="JAVA_HOME"/>
            <envVar name="JDK_HOME"/>
        </searchSequence>
        <variables/>
    </application>
    <files>
        <filesets/>
        <roots/>
        <mountPoints>
            <mountPoint id="17" root="" location="modules" mode="755"/>
            <mountPoint id="98" root="" location="bin" mode="755"/>
        </mountPoints>
        <entries>
            <dirEntry mountPoint="17" file="../../../target/gt-reader-pack-bin.dir/modules" overwrite="4" shared="false"
                      mode="644" uninstallMode="0" excludeSuffixes="" dirMode="755">
                <exclude/>
            </dirEntry>
        </entries>
        <components/>
    </files>
    <launchers/>
    <installerGui installerType="2" suggestPreviousProgramGroup="false" addOnAppId="2648-9058-9483-8098"
                  suggestPreviousLocations="true">
        <customCode useInstalledFiles="false"/>
        <applications>
            <application name="" id="installer"
                         beanClass="com.install4j.runtime.beans.applications.InstallerApplication" enabled="true"
                         commentSet="false" comment="" customIcnsFile="" customIcoFile="">
                <serializedBean>
                    <java class="java.beans.XMLDecoder">
                        <object class="com.install4j.runtime.beans.applications.InstallerApplication"/>
                    </java>
                </serializedBean>
                <startup>
                    <screen name="" id="1" beanClass="com.install4j.runtime.beans.screens.StartupScreen" enabled="true"
                            commentSet="false" comment="" rollbackBarrier="false" backButton="2" finishScreen="false">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.StartupScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                </startup>
                <screens>
                    <screen name="" id="2" beanClass="com.install4j.runtime.beans.screens.WelcomeScreen" enabled="true"
                            commentSet="false" comment="" rollbackBarrier="false" backButton="2" finishScreen="false">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.WelcomeScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                    <screen name="" id="61" beanClass="com.install4j.runtime.beans.screens.LicenseScreen" enabled="true"
                            commentSet="false" comment="" rollbackBarrier="false" backButton="2" finishScreen="false">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.LicenseScreen">
                                    <void property="displayedTextFile">
                                        <object class="com.install4j.api.beans.ExternalFile">
                                            <string>../../../target/gt-reader-pack-bin.dir/license.html</string>
                                        </object>
                                    </void>
                                </object>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                    <screen name="" id="3" beanClass="com.install4j.runtime.beans.screens.InstallationDirectoryScreen"
                            enabled="true" commentSet="false" comment="" rollbackBarrier="false" backButton="2"
                            finishScreen="false">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.InstallationDirectoryScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                    <screen name="" id="4" beanClass="com.install4j.runtime.beans.screens.ComponentsScreen"
                            enabled="true" commentSet="false" comment="" rollbackBarrier="false" backButton="2"
                            finishScreen="false">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.ComponentsScreen">
                                    <void property="showInstallationDirectoryChooser">
                                        <boolean>true</boolean>
                                    </void>
                                </object>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                    <screen name="" id="6" beanClass="com.install4j.runtime.beans.screens.InstallationScreen"
                            enabled="true" commentSet="false" comment="" rollbackBarrier="true" backButton="2"
                            finishScreen="false">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.InstallationScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation>File modulesDir = new File(context.getInstallationDirectory(), "modules");
                            File[] gtModuleFiles = modulesDir.listFiles(new FileFilter() {
                            public boolean accept(File file) {
                            String name = file.getName();
                            return name.startsWith("glob-") || name.startsWith("geotools-proj") ;
                            }
                            });

                            if (gtModuleFiles != null &amp;&amp; gtModuleFiles.length &gt; 0) {
                            StringBuilder sb = new StringBuilder("Following existing BEAM GlobToolbox Reader Pack
                            modules will be removed:\n");
                            for (int i = 0; i &lt; gtModuleFiles.length; i++) {
                            File file = gtModuleFiles[i];
                            sb.append(" " + file.getName() + "\n");
                            }
                            Util.showMessage(sb.toString());

                            sb = new StringBuilder();

                            Deque&lt;File&gt; toDelete = new ArrayDeque&lt;File&gt;();
                            for (int i = 0; i &lt; gtModuleFiles.length; i++) {
                            File file = gtModuleFiles[i];
                            toDelete.add(file);
                            }
                            while (!toDelete.isEmpty()) {
                            File file = toDelete.peek();
                            if (file.isDirectory()) {
                            File[] directoryContent = file.listFiles();
                            if (directoryContent == null || directoryContent.length == 0) {
                            toDelete.removeFirst();
                            if (!file.delete()) {
                            sb.append(" " + file.getName() + "\n");
                            }
                            } else {
                            for (File f : directoryContent) {
                            toDelete.addFirst(f);
                            }
                            }
                            } else {
                            toDelete.removeFirst();
                            if (!file.delete()) {
                            sb.append(" " + file.getName() + "\n");
                            }
                            }
                            }

                            if (sb.length() &gt; 0) {
                            Util.showMessage("Following existing BEAM GlobToolbox Reader Pack modules could not be
                            removed:\n"
                            + sb + "Please remove them manually from the BEAM modules directory at\n"
                            + modulesDir);
                            }
                            }
                            return;
                        </preActivation>
                        <postActivation/>
                        <actions>
                            <action name="" id="7" beanClass="com.install4j.runtime.beans.actions.InstallFilesAction"
                                    enabled="true" commentSet="false" comment="" rollbackBarrier="false"
                                    multiExec="false" failureStrategy="1" errorMessage="">
                                <serializedBean>
                                    <java class="java.beans.XMLDecoder">
                                        <object class="com.install4j.runtime.beans.actions.InstallFilesAction"/>
                                    </java>
                                </serializedBean>
                                <condition/>
                            </action>
                            <action name="" id="8"
                                    beanClass="com.install4j.runtime.beans.actions.desktop.CreateProgramGroupAction"
                                    enabled="true" commentSet="false" comment="" rollbackBarrier="false"
                                    multiExec="false" failureStrategy="1" errorMessage="">
                                <serializedBean>
                                    <java class="java.beans.XMLDecoder">
                                        <object class="com.install4j.runtime.beans.actions.desktop.CreateProgramGroupAction">
                                            <void property="programGroupName">
                                                <string>${compiler:sys.fullName}</string>
                                            </void>
                                        </object>
                                    </java>
                                </serializedBean>
                                <condition/>
                            </action>
                            <action name="" id="9"
                                    beanClass="com.install4j.runtime.beans.actions.desktop.RegisterAddRemoveAction"
                                    enabled="true" commentSet="false" comment="" rollbackBarrier="false"
                                    multiExec="false" failureStrategy="1" errorMessage="">
                                <serializedBean>
                                    <java class="java.beans.XMLDecoder">
                                        <object class="com.install4j.runtime.beans.actions.desktop.RegisterAddRemoveAction">
                                            <void property="itemName">
                                                <string>${compiler:sys.fullName} ${compiler:sys.version}</string>
                                            </void>
                                        </object>
                                    </java>
                                </serializedBean>
                                <condition/>
                            </action>
                        </actions>
                        <formComponents/>
                    </screen>
                    <screen name="" id="10" beanClass="com.install4j.runtime.beans.screens.FinishedScreen"
                            enabled="true" commentSet="false" comment="" rollbackBarrier="false" backButton="2"
                            finishScreen="true">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.FinishedScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                </screens>
            </application>
            <application name="" id="uninstaller"
                         beanClass="com.install4j.runtime.beans.applications.UninstallerApplication" enabled="true"
                         commentSet="false" comment="" customIcnsFile="" customIcoFile="">
                <serializedBean>
                    <java class="java.beans.XMLDecoder">
                        <object class="com.install4j.runtime.beans.applications.UninstallerApplication"/>
                    </java>
                </serializedBean>
                <startup>
                    <screen name="" id="11" beanClass="com.install4j.runtime.beans.screens.StartupScreen" enabled="true"
                            commentSet="false" comment="" rollbackBarrier="false" backButton="2" finishScreen="false">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.StartupScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                </startup>
                <screens>
                    <screen name="" id="12" beanClass="com.install4j.runtime.beans.screens.UninstallWelcomeScreen"
                            enabled="true" commentSet="false" comment="" rollbackBarrier="false" backButton="2"
                            finishScreen="false">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.UninstallWelcomeScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                    <screen name="" id="13" beanClass="com.install4j.runtime.beans.screens.UninstallationScreen"
                            enabled="true" commentSet="false" comment="" rollbackBarrier="false" backButton="2"
                            finishScreen="false">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.UninstallationScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions>
                            <action name="" id="14" beanClass="com.install4j.runtime.beans.actions.UninstallFilesAction"
                                    enabled="true" commentSet="false" comment="" rollbackBarrier="false"
                                    multiExec="false" failureStrategy="1" errorMessage="">
                                <serializedBean>
                                    <java class="java.beans.XMLDecoder">
                                        <object class="com.install4j.runtime.beans.actions.UninstallFilesAction"/>
                                    </java>
                                </serializedBean>
                                <condition/>
                            </action>
                        </actions>
                        <formComponents/>
                    </screen>
                    <screen name="" id="16" beanClass="com.install4j.runtime.beans.screens.UninstallFailureScreen"
                            enabled="true" commentSet="false" comment="" rollbackBarrier="false" backButton="2"
                            finishScreen="true">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.UninstallFailureScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                    <screen name="" id="15" beanClass="com.install4j.runtime.beans.screens.UninstallSuccessScreen"
                            enabled="true" commentSet="false" comment="" rollbackBarrier="false" backButton="2"
                            finishScreen="true">
                        <serializedBean>
                            <java class="java.beans.XMLDecoder">
                                <object class="com.install4j.runtime.beans.screens.UninstallSuccessScreen"/>
                            </java>
                        </serializedBean>
                        <condition/>
                        <validation/>
                        <preActivation/>
                        <postActivation/>
                        <actions/>
                        <formComponents/>
                    </screen>
                </screens>
            </application>
        </applications>
    </installerGui>
    <buildIds buildAll="true"/>
</install4j>

